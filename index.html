<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>景区人流量监控 - 推荐区域显示</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 微信专用meta标签 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no, email=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    
    <style>
        /* 防止微信调整字体大小 */
        body {
            -webkit-text-size-adjust: 100% !important;
            text-size-adjust: 100% !important;
            -moz-text-size-adjust: 100% !important;
        }
        
        /* 确保SVG填充颜色优先级 */
        .scenic-map polygon {
            fill: #3498db; /* 默认蓝色，会被JS覆盖 */
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-map-marked-alt"></i> 景区人流量监控系统</h1>
            <p class="subtitle">实时显示各区域人流密度，绿色舒适、黄色一般、红色拥挤</p>
        </header>

        <div class="content">
            <div class="left-panel">
                <div class="map-container">
                    <svg class="scenic-map" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                        <!-- 区域A - 直接添加内联样式确保显示 -->
                        <polygon id="areaA" class="area" 
                                 points="150,100 300,50 450,150 350,250 200,200" data-area="A">
                        </polygon>
                        
                        <!-- 区域B -->
                        <polygon id="areaB" class="area" 
                                 points="300,50 550,80 600,200 450,150" data-area="B">
                        </polygon>
                        
                        <!-- 区域C -->
                        <polygon id="areaC" class="area" 
                                 points="450,150 600,200 550,400 400,350 350,250" data-area="C">
                        </polygon>
                        
                        <!-- 区域D -->
                        <polygon id="areaD" class="area" 
                                 points="150,100 200,200 350,250 400,350 250,450 100,350 80,200" data-area="D">
                        </polygon>
                        
                        <!-- 区域标签 -->
                        <text x="250" y="150" style="fill:white; font-size:28px; font-weight:bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">A</text>
                        <text x="450" y="120" style="fill:white; font-size:28px; font-weight:bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">B</text>
                        <text x="450" y="300" style="fill:white; font-size:28px; font-weight:bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">C</text>
                        <text x="200" y="350" style="fill:white; font-size:28px; font-weight:bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">D</text>
                        
                        <!-- 图例 -->
                        <rect x="20" y="500" width="20" height="20" style="fill:#2ecc71; stroke:white; stroke-width:2;"/>
                        <text x="50" y="515" style="fill:#2c3e50; font-size:14px; font-weight:bold;">舒适 (<70%)</text>
                        
                        <rect x="150" y="500" width="20" height="20" style="fill:#f1c40f; stroke:white; stroke-width:2;"/>
                        <text x="180" y="515" style="fill:#2c3e50; font-size:14px; font-weight:bold;">一般 (70-85%)</text>
                        
                        <rect x="280" y="500" width="20" height="20" style="fill:#e74c3c; stroke:white; stroke-width:2;"/>
                        <text x="310" y="515" style="fill:#2c3e50; font-size:14px; font-weight:bold;">拥挤 (>85%)</text>
                    </svg>
                    
                    <div class="map-title">景区游览区域分布图</div>
                </div>
            </div>
            
            <div class="right-panel">
                <div class="info-card">
                    <h2><i class="fas fa-info-circle"></i> 区域状态</h2>
                    
                    <div class="status-container">
                        <div class="status-item" data-area="A">
                            <div class="status-header">
                                <span class="area-badge">A区（广场）</span>
                                <span class="status-indicator status-red">拥挤</span>
                            </div>
                            <p class="status-desc">当前人数: <strong>120/300</strong> (40%)</p>
                            <p class="status-time">预计排队: <span id="queueA">15</span>分钟</p>
                        </div>
                        
                        <div class="status-item" data-area="B">
                            <div class="status-header">
                                <span class="area-badge">B区（观景台）</span>
                                <span class="status-indicator status-red">已达上限</span>
                            </div>
                            <p class="status-desc">当前人数: <strong>190/200</strong> (95%)</p>
                            <p class="status-time">预计排队: <span id="queueB">25</span>分钟</p>
                        </div>
                        
                        <div class="status-item" data-area="C">
                            <div class="status-header">
                                <span class="area-badge">C区（花园）</span>
                                <span class="status-indicator status-green">舒适</span>
                            </div>
                            <p class="status-desc">当前人数: <strong>120/250</strong> (48%)</p>
                            <p class="status-time">预计排队: <span id="queueC">5</span>分钟</p>
                        </div>
                        
                        <div class="status-item" data-area="D">
                            <div class="status-header">
                                <span class="area-badge">D区（步道）</span>
                                <span class="status-indicator status-yellow">一般</span>
                            </div>
                            <p class="status-desc">当前人数: <strong>150/180</strong> (83%)</p>
                            <p class="status-time">预计排队: <span id="queueD">10</span>分钟</p>
                        </div>
                    </div>
                </div>
                
                <div class="info-card">
                    <h2><i class="fas fa-chart-line"></i> 实时数据</h2>
                    <div class="stats">
                        <div class="stat">
                            <div class="stat-value" id="totalVisitors">580</div>
                            <div class="stat-label">当前景区总人数</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="comfortableAreas">1</div>
                            <div class="stat-label">舒适区域数</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="updateTime">15:30</div>
                            <div class="stat-label">最后更新时间</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="nextUpdate">2:00</div>
                            <div class="stat-label">下次更新</div>
                        </div>
                    </div>
                    
                    <button id="refreshBtn" class="refresh-btn">
                        <i class="fas fa-sync-alt"></i> 立即刷新数据
                    </button>
                </div>
                
                <div class="info-card tips">
                    <h2><i class="fas fa-lightbulb"></i> 游览建议</h2>
                    <ul>
                        <li><span class="color-dot green"></span> 绿色区域：舒适，推荐优先游览</li>
                        <li><span class="color-dot yellow"></span> 黄色区域：一般，可选择性游览</li>
                        <li><span class="color-dot red"></span> 红色区域：拥挤，建议避开</li>
                        <li>点击地图区域查看详细信息和排队时间</li>
                        <li>数据每2分钟自动更新一次</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <footer>
            <p>景区人流量监控系统 &copy; 2023 | 数据每2分钟自动更新 | 最后更新: <span id="lastUpdate">今天 15:30</span> | 下次更新: <span id="nextUpdateTime">2分钟后</span></p>
        </footer>
    </div>

    <!-- 主脚本 -->
    <script src="script.js"></script>
</body>
</html>
